<div
  class="container d-flex align-items-center justify-content-center py-5 my-4"
>
  <div
    class="card shadow-lg border-0"
    style="max-width: 500px; width: 100%; border-radius: 15px"
  >
    <div
      class="card-header text-center border-0 bg-white"
      style="border-radius: 15px 15px 0 0"
    >
      <h2 class="mb-0 text-primary fw-bold mt-2">
        <i class="fas fa-user-plus me-2"></i>Registro de Paciente
      </h2>
      <p class="text-muted mt-2 mb-0">
        Complete sus datos para crear su cuenta
      </p>
    </div>

    <div class="card-body p-4">
      <form (ngSubmit)="registrarPaciente()" #form="ngForm">
        <!-- Nombre y Apellido en una fila -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label fw-bold text-dark">
              <i class="fas fa-user me-1 text-primary"></i>Nombre
            </label>
            <input
              type="text"
              class="form-control"
              name="nombre"
              [(ngModel)]="paciente.nombre"
              required
              #nombre="ngModel"
              placeholder="Ingrese su nombre"
            />
            <div
              class="text-danger small mt-1"
              *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)"
            >
              El nombre es obligatorio.
            </div>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-bold text-dark">
              <i class="fas fa-user me-1 text-primary"></i>Apellido
            </label>
            <input
              type="text"
              class="form-control"
              name="apellido"
              [(ngModel)]="paciente.apellido"
              required
              #apellido="ngModel"
              placeholder="Ingrese su apellido"
            />
            <div
              class="text-danger small mt-1"
              *ngIf="apellido.invalid && (apellido.dirty || apellido.touched)"
            >
              El apellido es obligatorio.
            </div>
          </div>
        </div>

        <!-- DNI -->
        <div class="mb-3">
          <label class="form-label fw-bold text-dark">
            <i class="fas fa-id-card me-1 text-primary"></i>DNI
          </label>
          <input
            type="text"
            class="form-control"
            name="dni"
            [(ngModel)]="paciente.dni"
            required
            pattern="^[0-9]{7,8}$"
            #dni="ngModel"
            placeholder="1234567 o 12345678"
          />
          <div class="form-text text-muted">
            <i class="fas fa-info-circle me-1"></i>Debe contener entre 7 y 8
            números (sin puntos ni letras).
          </div>
          <div
            class="text-danger small mt-1"
            *ngIf="dni.invalid && (dni.dirty || dni.touched)"
          >
            <div *ngIf="dni.errors?.['required']">El DNI es obligatorio.</div>
            <div *ngIf="dni.errors?.['pattern']">
              El DNI debe tener entre 7 y 8 números.
            </div>
          </div>
        </div>

        <!-- Teléfono y Fecha de Nacimiento en una fila -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label fw-bold text-dark">
              <i class="fas fa-phone me-1 text-primary"></i>Teléfono
            </label>
            <input
              type="text"
              class="form-control"
              name="telefono"
              [(ngModel)]="paciente.telefono"
              required
              pattern="^388[0-9]{7}$"
              #telefono="ngModel"
              placeholder="3881234567"
            />
            <div class="form-text text-muted small">
              <i class="fas fa-info-circle me-1"></i>Formato: 388xxxxxxx
            </div>
            <div
              class="text-danger small mt-1"
              *ngIf="telefono.invalid && (telefono.dirty || telefono.touched)"
            >
              <div *ngIf="telefono.errors?.['required']">
                El teléfono es obligatorio.
              </div>
              <div *ngIf="telefono.errors?.['pattern']">
                Debe comenzar con 388 y tener 10 dígitos.
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-bold text-dark">
              <i class="fas fa-calendar me-1 text-primary"></i>Fecha de
              nacimiento
            </label>
            <input
              type="date"
              class="form-control"
              name="fechaNacimiento"
              [(ngModel)]="paciente.fechaNacimiento"
              required
              #fechaNacimiento="ngModel"
            />
            <div
              class="text-danger small mt-1"
              *ngIf="
                fechaNacimiento.invalid &&
                (fechaNacimiento.dirty || fechaNacimiento.touched)
              "
            >
              La fecha de nacimiento es obligatoria.
            </div>
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label class="form-label fw-bold text-dark">
            <i class="fas fa-envelope me-1 text-primary"></i>Email
            <span class="badge bg-secondary ms-1">Opcional</span>
          </label>
          <input
            type="email"
            class="form-control"
            name="email"
            [(ngModel)]="paciente.email"
            pattern="^[^&#64;\s]+&#64;[^&#64;\s]+\.[^&#64;\s]+$"
            #email="ngModel"
            placeholder="usuario@dominio.com"
          />
          <div class="form-text text-muted">
            <i class="fas fa-info-circle me-1"></i>Formato de correo electrónico
            válido.
          </div>
          <div
            class="text-danger small mt-1"
            *ngIf="email.invalid && (email.dirty || email.touched)"
          >
            <div *ngIf="email.errors?.['pattern']">
              El email debe ser válido y contener un &#64;.
            </div>
          </div>
        </div>

        <!-- Contraseña -->
        <div class="mb-4">
          <label class="form-label fw-bold text-dark">
            <i class="fas fa-lock me-1 text-primary"></i>Contraseña
          </label>
          <input
            type="password"
            class="form-control"
            name="password"
            [(ngModel)]="paciente.password"
            required
            minlength="6"
            #password="ngModel"
            placeholder="Mínimo 6 caracteres"
          />
          <div class="form-text text-muted">
            <i class="fas fa-info-circle me-1"></i>Mínimo 6 caracteres.
          </div>
          <div
            class="text-danger small mt-1"
            *ngIf="password.invalid && (password.dirty || password.touched)"
          >
            <div *ngIf="password.errors?.['required']">
              La contraseña es obligatoria.
            </div>
            <div *ngIf="password.errors?.['minlength']">
              La contraseña debe tener al menos 6 caracteres.
            </div>
          </div>
        </div>

        <!-- Botón de envío -->
        <div class="d-grid mb-3">
          <button
            type="submit"
            class="btn btn-primary btn-lg fw-bold py-3"
            [disabled]="!form.valid || cargando"
            style="
              border-radius: 10px;
              background: linear-gradient(45deg, #007bff, #0056b3);
            "
          >
            <span
              *ngIf="cargando"
              class="spinner-border spinner-border-sm me-2"
              role="status"
            ></span>
            <i class="fas fa-user-plus me-2" *ngIf="!cargando"></i>
            {{ cargando ? "Registrando..." : "Registrar Paciente" }}
          </button>
        </div>

        <!-- Mensajes -->
        <div class="mt-3">
          <div
            class="alert alert-success d-flex align-items-center"
            *ngIf="mensaje"
            style="border-radius: 10px"
          >
            <i class="fas fa-check-circle me-2"></i>
            {{ mensaje }}
          </div>
          <div
            class="alert alert-danger d-flex align-items-center"
            *ngIf="error"
            style="border-radius: 10px"
          >
            <i class="fas fa-exclamation-triangle me-2"></i>
            {{ error }}
          </div>
        </div>

        <!-- Link al login -->
        <div class="text-center mt-3">
          <p class="text-muted mb-0">
            ¿Ya tienes cuenta?
            <a href="/login" class="text-primary text-decoration-none fw-bold">
              <i class="fas fa-sign-in-alt me-1"></i>Iniciar Sesión
            </a>
          </p>
        </div>
      </form>
    </div>
  </div>
</div>
