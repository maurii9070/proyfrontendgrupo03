<div
  class="d-flex justify-content-center align-items-center min-vh-100 bg-primary-subtle"
>
  <div
    class="card shadow-lg border-0 rounded-4"
    style="max-width: 400px; width: 100%"
  >
    <div class="card-body p-5">
      <!-- Logo o título -->
      <div class="text-center mb-4">
        <h3 class="fw-bold text-primary mb-2">Resetear Contraseña</h3>
        <p class="text-muted">Ingrese su DNI y defina una nueva contraseña</p>
      </div>

      <!-- Formulario de resetear password -->
      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <!-- Campo DNI -->
        <div class="mb-3">
          <label for="dni" class="form-label fw-medium text-dark">DNI</label>
          <div class="input-group">
            <span class="input-group-text bg-light border-end-0">
              <i class="bi bi-person-vcard text-secondary"></i>
            </span>
            <input
              type="text"
              class="form-control border-start-0 ps-2"
              id="dni"
              formControlName="dni"
              placeholder="Ingrese su DNI"
              maxlength="8"
              [class.is-invalid]="dni?.invalid && dni?.touched"
              [class.is-valid]="dni?.valid && dni?.touched"
            />
          </div>
          <div class="form-text">
            Ingrese su número de documento sin puntos ni espacios
          </div>

          <!-- Mensajes de validación para DNI -->
          @if (dni?.invalid && dni?.touched) {
          <div class="text-danger small mt-1">
            @if (dni?.errors?.['required']) {
            <div>
              <i class="bi bi-exclamation-circle me-1"></i>El DNI es requerido
            </div>
            } @if (dni?.errors?.['pattern']) {
            <div>
              <i class="bi bi-exclamation-circle me-1"></i>El DNI debe contener
              entre 7 y 8 dígitos
            </div>
            }
          </div>
          }
        </div>

        <!-- Campo Nueva Contraseña -->
        <div class="mb-4">
          <label for="newPassword" class="form-label fw-medium text-dark"
            >Nueva Contraseña</label
          >
          <div class="input-group">
            <span class="input-group-text bg-light border-end-0">
              <i class="bi bi-lock text-secondary"></i>
            </span>
            <input
              [type]="showPassword ? 'text' : 'password'"
              class="form-control border-start-0 border-end-0 ps-2"
              id="newPassword"
              formControlName="newPassword"
              placeholder="Ingrese su nueva contraseña"
              [class.is-invalid]="newPassword?.invalid && newPassword?.touched"
              [class.is-valid]="newPassword?.valid && newPassword?.touched"
            />
            <span
              class="input-group-text bg-light border-start-0"
              style="cursor: pointer"
              (click)="togglePasswordVisibility()"
            >
              <i
                [class]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"
                class="text-secondary"
              ></i>
            </span>
          </div>
          <div class="form-text">Mínimo 6 caracteres</div>

          <!-- Mensajes de validación para nueva contraseña -->
          @if (newPassword?.invalid && newPassword?.touched) {
          <div class="text-danger small mt-1">
            @if (newPassword?.errors?.['required']) {
            <div>
              <i class="bi bi-exclamation-circle me-1"></i>La contraseña es
              requerida
            </div>
            } @if (newPassword?.errors?.['minlength']) {
            <div>
              <i class="bi bi-exclamation-circle me-1"></i>La contraseña debe
              tener al menos 6 caracteres
            </div>
            }
          </div>
          }
        </div>

        <!-- Botón de resetear -->
        <div class="d-grid">
          <button
            type="submit"
            class="btn btn-primary btn-lg rounded-3"
            [disabled]="resetPasswordForm.invalid || isLoading"
          >
            @if (isLoading) {
            <span class="spinner-border spinner-border-sm me-2" role="status">
              <span class="visually-hidden">Loading...</span>
            </span>
            Procesando... } @else {
            <i class="bi bi-shield-lock me-2"></i>
            Resetear Contraseña }
          </button>
        </div>
      </form>

      <!-- Link para volver al login -->
      <div class="text-center mt-3">
        <a href="/login" class="text-decoration-none text-muted small">
          <i class="bi bi-arrow-left me-1"></i>
          Volver al inicio de sesión
        </a>
      </div>
    </div>
  </div>
</div>
